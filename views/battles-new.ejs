<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dance Battles</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }
    
    body {
      background: #0a0a0a;
      color: #fff;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      text-align: center;
      margin-bottom: 40px;
      padding: 30px;
      background: linear-gradient(45deg, #ff3b5c, #ff713e);
      border-radius: 15px;
      position: relative;
      overflow: hidden;
    }
    
    header h1 {
      font-size: 3rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    header p {
      font-size: 1.3rem;
      opacity: 0.9;
    }
    
    .back-button {
      position: fixed;
      top: 20px;
      left: 20px;
      background: #ff3b5c;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      z-index: 1000;
      transition: all 0.3s ease;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .back-button:hover {
      background: #e53e3e;
      transform: translateY(-2px);
    }
    
    .battle-modes {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      margin-bottom: 50px;
    }
    
    .battle-mode {
      background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }
    
    .battle-mode:hover {
      transform: translateY(-10px);
      border-color: #ff3b5c;
      box-shadow: 0 20px 40px rgba(255, 59, 92, 0.3);
    }
    
    .battle-mode h3 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: #ff3b5c;
    }
    
    .battle-mode p {
      font-size: 1.1rem;
      color: #ccc;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    
    .battle-mode .icon {
      font-size: 3rem;
      margin-bottom: 20px;
      color: #ff713e;
    }
    
    .battle-btn {
      background: linear-gradient(45deg, #ff3b5c, #ff713e);
      color: #fff;
      border: none;
      padding: 15px 30px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: bold;
      transition: all 0.3s ease;
      margin-top: 10px;
    }
    
    .battle-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(255, 59, 92, 0.4);
    }
    
    .active-battles {
      background: #1a1a1a;
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 40px;
    }
    
    .section-title {
      font-size: 2rem;
      margin-bottom: 25px;
      color: #ff3b5c;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .battles-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
    }
    
    .battle-card {
      background: #2a2a2a;
      border-radius: 15px;
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .battle-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }
    
    .battle-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    
    .battle-content {
      padding: 20px;
    }
    
    .battle-title {
      font-size: 1.4rem;
      margin-bottom: 10px;
      color: #ff3b5c;
    }
    
    .battle-description {
      color: #ccc;
      margin-bottom: 15px;
      line-height: 1.5;
    }
    
    .battle-stats {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: #888;
    }
    
    .leaderboard {
      background: #1a1a1a;
      border-radius: 20px;
      padding: 30px;
    }
    
    .leaderboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }
    
    .leaderboard-item {
      background: #2a2a2a;
      border-radius: 15px;
      padding: 20px;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
    }
    
    .leaderboard-item:hover {
      background: #333;
    }
    
    .rank {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #ff3b5c;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 1.3rem;
      margin-right: 20px;
    }
    
    .rank.gold {
      background: linear-gradient(135deg, #FFD700, #FFA500);
    }
    
    .rank.silver {
      background: linear-gradient(135deg, #C0C0C0, #A9A9A9);
    }
    
    .rank.bronze {
      background: linear-gradient(135deg, #CD7F32, #A0522D);
    }
    
    .user-details {
      flex: 1;
    }
    
    .user-name {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 1.1rem;
    }
    
    .user-score {
      color: #888;
    }
    
    /* Battle Creation Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: #1a1a1a;
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .modal-title {
      font-size: 1.8rem;
      color: #ff3b5c;
    }
    
    .close-modal {
      font-size: 2rem;
      color: #aaa;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .close-modal:hover {
      color: #fff;
    }
    
    .form-group {
      margin-bottom: 25px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #fff;
      font-weight: bold;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #333;
      border-radius: 10px;
      background: #2a2a2a;
      color: #fff;
      font-size: 1rem;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: #ff3b5c;
      outline: none;
    }
    
    .songs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .song-option {
      background: #2a2a2a;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .song-option:hover,
    .song-option.selected {
      border-color: #ff3b5c;
      background: #333;
    }
    
    .song-option img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    
    .create-battle-btn {
      width: 100%;
      background: linear-gradient(45deg, #ff3b5c, #ff713e);
      color: #fff;
      border: none;
      padding: 15px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    
    .create-battle-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 59, 92, 0.4);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      header h1 {
        font-size: 2rem;
      }
      
      header p {
        font-size: 1rem;
      }
      
      .battle-modes {
        grid-template-columns: 1fr;
      }
      
      .battles-grid,
      .leaderboard-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <a href="/" class="back-button">
    <i class="fas fa-arrow-left"></i>
    Back to Home
  </a>

  <div class="container">
    <header>
      <h1><i class="fas fa-trophy"></i> Dance Battles</h1>
      <p>Challenge dancers worldwide and prove your moves!</p>
    </header>

    <!-- Battle Modes -->
    <div class="battle-modes">
      <div class="battle-mode" onclick="openCreateBattleModal()">
        <div class="icon"><i class="fas fa-plus-circle"></i></div>
        <h3>Create Battle</h3>
        <p>Start your own dance battle and invite others to compete. Choose the song, set the rules, and let the dancing begin!</p>
        <button class="battle-btn">Create New Battle</button>
      </div>
      
      <div class="battle-mode" onclick="showRandomBattle()">
        <div class="icon"><i class="fas fa-random"></i></div>
        <h3>Quick Battle</h3>
        <p>Jump into a random battle instantly! Perfect for warming up or when you're feeling spontaneous.</p>
        <button class="battle-btn">Start Quick Battle</button>
      </div>
      
      <div class="battle-mode" onclick="showTournaments()">
        <div class="icon"><i class="fas fa-crown"></i></div>
        <h3>Tournaments</h3>
        <p>Compete in structured tournaments with multiple rounds. Climb the brackets to become the ultimate dance champion!</p>
        <button class="battle-btn">Join Tournament</button>
      </div>
    </div>

    <!-- Active Battles -->
    <div class="active-battles">
      <h2 class="section-title">
        <i class="fas fa-fire"></i>
        Active Battles
      </h2>
      <div class="battles-grid">
        <div class="battle-card" onclick="joinBattle('battle1')">
          <img src="/images/bts-dynamite.jpg" alt="BTS Dynamite Battle">
          <div class="battle-content">
            <div class="battle-title">Dynamite Challenge</div>
            <div class="battle-description">Show your energy with BTS Dynamite! 17 seconds of pure dance power.</div>
            <div class="battle-stats">
              <span><i class="fas fa-users"></i> 8/12 dancers</span>
              <span><i class="fas fa-clock"></i> 2 days left</span>
            </div>
          </div>
        </div>
        
        <div class="battle-card" onclick="joinBattle('battle2')">
          <img src="/images/michael-jackson.jpg" alt="Michael Jackson Battle">
          <div class="battle-content">
            <div class="battle-title">Thriller Showdown</div>
            <div class="battle-description">Master the legendary Thriller moves. Only the smoothest criminals survive!</div>
            <div class="battle-stats">
              <span><i class="fas fa-users"></i> 5/10 dancers</span>
              <span><i class="fas fa-clock"></i> 4 days left</span>
            </div>
          </div>
        </div>
        
        <div class="battle-card" onclick="joinBattle('battle3')">
          <img src="/images/megan-savage.jpg" alt="Savage Battle">
          <div class="battle-content">
            <div class="battle-title">Savage Mode</div>
            <div class="battle-description">Channel your inner savage with Megan Thee Stallion's hit. Confidence required!</div>
            <div class="battle-stats">
              <span><i class="fas fa-users"></i> 12/15 dancers</span>
              <span><i class="fas fa-clock"></i> 1 day left</span>
            </div>
          </div>
        </div>
        
        <div class="battle-card" onclick="joinBattle('battle4')">
          <img src="/images/ciara-level-up.jpg" alt="Level Up Battle">
          <div class="battle-content">
            <div class="battle-title">Level Up Challenge</div>
            <div class="battle-description">It's time to level up your dance game with Ciara's powerful choreography!</div>
            <div class="battle-stats">
              <span><i class="fas fa-users"></i> 3/8 dancers</span>
              <span><i class="fas fa-clock"></i> 5 days left</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Leaderboard -->
    <div class="leaderboard">
      <h2 class="section-title">
        <i class="fas fa-medal"></i>
        Battle Champions
      </h2>
      <div class="leaderboard-grid">
        <div class="leaderboard-item">
          <div class="rank gold">1</div>
          <div class="user-details">
            <div class="user-name">DanceQueen24</div>
            <div class="user-score">2,847 battle points</div>
          </div>
        </div>
        
        <div class="leaderboard-item">
          <div class="rank silver">2</div>
          <div class="user-details">
            <div class="user-name">MoveMaster</div>
            <div class="user-score">2,531 battle points</div>
          </div>
        </div>
        
        <div class="leaderboard-item">
          <div class="rank bronze">3</div>
          <div class="user-details">
            <div class="user-name">RhythmRider</div>
            <div class="user-score">2,298 battle points</div>
          </div>
        </div>
        
        <div class="leaderboard-item">
          <div class="rank">4</div>
          <div class="user-details">
            <div class="user-name">FlowFighter</div>
            <div class="user-score">2,156 battle points</div>
          </div>
        </div>
        
        <div class="leaderboard-item">
          <div class="rank">5</div>
          <div class="user-details">
            <div class="user-name">BeatBreaker</div>
            <div class="user-score">1,987 battle points</div>
          </div>
        </div>
        
        <div class="leaderboard-item">
          <div class="rank">6</div>
          <div class="user-details">
            <div class="user-name">StepStar</div>
            <div class="user-score">1,843 battle points</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Battle Modal -->
  <div class="modal" id="createBattleModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">Create New Battle</div>
        <div class="close-modal" onclick="closeCreateBattleModal()">&times;</div>
      </div>
      
      <form id="createBattleForm" onsubmit="submitBattle(event)">
        <div class="form-group">
          <label for="battleName">Battle Name</label>
          <input type="text" id="battleName" name="battleName" placeholder="Enter battle name..." required>
        </div>
        
        <div class="form-group">
          <label for="battleDescription">Description</label>
          <textarea id="battleDescription" name="battleDescription" rows="3" placeholder="Describe your battle challenge..."></textarea>
        </div>
        
        <div class="form-group">
          <label>Choose Song</label>
          <div class="songs-grid">
            <div class="song-option" onclick="selectSong('cwub1m1pq0c', 'Dynamite - BTS', this)">
              <img src="/images/bts-dynamite.jpg" alt="BTS Dynamite">
              <div>Dynamite - BTS</div>
            </div>
            <div class="song-option" onclick="selectSong('dsUXAEzaC3Q', 'Bad - Michael Jackson', this)">
              <img src="/images/michael-jackson.jpg" alt="Michael Jackson Bad">
              <div>Bad - Michael Jackson</div>
            </div>
            <div class="song-option" onclick="selectSong('BQnS5LUGbCQ', 'Savage - Megan Thee Stallion', this)">
              <img src="/images/megan-savage.jpg" alt="Megan Thee Stallion Savage">
              <div>Savage - Megan Thee Stallion</div>
            </div>
            <div class="song-option" onclick="selectSong('VUAMlyDtbPQ', 'Level Up - Ciara', this)">
              <img src="/images/ciara-level-up.jpg" alt="Ciara Level Up">
              <div>Level Up - Ciara</div>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="maxParticipants">Max Participants</label>
          <select id="maxParticipants" name="maxParticipants">
            <option value="5">5 dancers</option>
            <option value="10" selected>10 dancers</option>
            <option value="15">15 dancers</option>
            <option value="20">20 dancers</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="battleDuration">Battle Duration</label>
          <select id="battleDuration" name="battleDuration">
            <option value="1">1 day</option>
            <option value="3" selected>3 days</option>
            <option value="7">1 week</option>
            <option value="14">2 weeks</option>
          </select>
        </div>
        
        <button type="submit" class="create-battle-btn">
          <i class="fas fa-rocket"></i> Launch Battle
        </button>
      </form>
    </div>
  </div>

  <script>
    let selectedSong = null;
    
    function openCreateBattleModal() {
      document.getElementById('createBattleModal').style.display = 'flex';
    }
    
    function closeCreateBattleModal() {
      document.getElementById('createBattleModal').style.display = 'none';
      selectedSong = null;
      // Clear selected song styling
      document.querySelectorAll('.song-option').forEach(option => {
        option.classList.remove('selected');
      });
    }
    
    function selectSong(videoId, title, element) {
      // Clear previous selections
      document.querySelectorAll('.song-option').forEach(option => {
        option.classList.remove('selected');
      });
      
      // Select current song
      element.classList.add('selected');
      selectedSong = { videoId, title };
    }
    
    function submitBattle(event) {
      event.preventDefault();
      
      if (!selectedSong) {
        alert('Please select a song for the battle!');
        return;
      }
      
      const formData = new FormData(event.target);
      const battleData = {
        name: formData.get('battleName'),
        description: formData.get('battleDescription'),
        song: selectedSong,
        maxParticipants: parseInt(formData.get('maxParticipants')),
        duration: parseInt(formData.get('battleDuration'))
      };
      
      // Simulate battle creation
      alert('Battle created successfully! Other dancers can now join.');
      closeCreateBattleModal();
      
      // In a real app, you would send this data to the server
      console.log('Battle created:', battleData);
    }
    
    function joinBattle(battleId) {
      // Redirect to camera page with battle mode
      const battleSongs = {
        'battle1': { videoId: 'cwub1m1pq0c', range: '36-53' },
        'battle2': { videoId: 'dsUXAEzaC3Q', range: '60-90' },
        'battle3': { videoId: 'BQnS5LUGbCQ', range: '30-47' },
        'battle4': { videoId: 'VUAMlyDtbPQ', range: '45-65' }
      };
      
      const battle = battleSongs[battleId];
      if (battle) {
        window.location.href = `/camera?videoId=${battle.videoId}&range=${battle.range}&mode=battle&battleId=${battleId}`;
      }
    }
    
    function showRandomBattle() {
      const randomBattles = ['battle1', 'battle2', 'battle3', 'battle4'];
      const randomBattle = randomBattles[Math.floor(Math.random() * randomBattles.length)];
      joinBattle(randomBattle);
    }
    
    function showTournaments() {
      alert('Tournaments feature coming soon! Join individual battles for now.');
    }
  </script>
</body>
</html>
